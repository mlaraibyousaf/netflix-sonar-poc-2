name: sonar-project-workflow
on:
  workflow_dispatch: 
    inputs:
      project_names:
        description: 'Enter colors (e.g., "Proj1 Proj2 Proj3")'
        required: true
jobs:
  sonarcloud:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
     
      - name: script
        shell: bash
        run: | 
        
         SONAR_TOKEN=${{ secrets.SONAR_TOKEN }}
         ORGANIZATION=${{ vars.ORGANIZATION_KEY }}
         # VISIBILITY="private"
         NEW_CODE_DEFINITION_TYPE="previous_version"
         NEW_CODE_DEFINITION_VALUE="previous_version"
        
         # List of project names and keys
         # Convert the input string to an array
         IFS=' ' read -r -a PROJECTS <<< "${{ inputs.project_names }}"
         echo  The projects are ${{ inputs.project_names }}
         PROJECTS=${{ inputs.PROJECT_NAME }}
         echo  The tags are ${{ inputs.project_names }}
         # for i in "${!PROJECTS[@]}"; do
         #     PROJECT_NAME="${PROJECTS[$i]}"
         #     PROJECT_KEY="$ORGANIZATION"_"$PROJECT_NAME"
        
         #     curl --include \
         #          --request POST \
         #          -u "$SONAR_TOKEN:" \
         #          "https://sonarcloud.io/api/projects/create?organization=$ORGANIZATION&project=$PROJECT_KEY&name=$PROJECT_NAME&newCodeDefinitionType=$NEW_CODE_DEFINITION_TYPE&newCodeDefinitionValue=$NEW_CODE_DEFINITION_VALUE"
         # done
